<!DOCTYPE html>
<html>
<head>
    <title>Create Event</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const modeSelect = document.getElementById("id_mode");
            const raceForm = document.getElementById("race-form");
            const raceFormset = document.getElementById("race-formset");
            const carFormset = document.getElementById("car-formset");

            function toggleForms() {
                const mode = modeSelect.value;
                if (mode === "torneo") {
                    raceForm.style.display = "none";
                    raceFormset.style.display = "block";
                    carFormset.style.display = "block";
                } else {
                    raceForm.style.display = "block";
                    raceFormset.style.display = "none";
                    carFormset.style.display = "block";
                }
            }

            modeSelect.addEventListener("change", toggleForms);
            toggleForms();
        });
    </script>
</head>
<body>
    <h1>Create Event</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ event_form.as_p }}
        <div id="race-form">
            {{ race_form.as_p }}
        </div>
        <div id="race-formset">
            {{ race_formset.management_form }}
            {% for form in race_formset %}
                {{ form.as_p }}
            {% endfor %}
        </div>
        <div id="car-formset">
            {{ car_formset.management_form }}
            {% for form in car_formset %}
                {{ form.as_p }}
            {% endfor %}
        </div>
        <button type="submit">Create Event</button>
    </form>
</body>
</html>